<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Transform your mind, body & spirit at Soma Wellness Studio - Ancient Nepali healing traditions meet modern wellness"
    />
    <title>Soma</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;600&family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <style>
    :root {
      --beige-100: #f6f1e7;
      --beige-200: #bfb4b4;
      --beige-300: #d6c6b5;
      --rose-400: #c68a83;
      --gold-400: #d4a66a;
      --sage-500: #758d7c;
      --text-600: #6b645f;
      --text-700: #5b524c;
      --white-soft: #fdfbf9;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: hsl(var(--background));
      color: hsl(var(--foreground));
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    /* Hero layout */
    #soma-hero {
      position: relative;
      height: 100vh;
      min-height: 100vh;
      overflow: hidden;
      perspective: 800px;
      isolation: isolate;
      transform: translateZ(0);
    }

    .hero-bg {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: -1;
    }

    .hero-video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.7;
      mix-blend-mode: multiply;
      display: block;
    }

    /* Warm wash and vignette */
    .hero-wash {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to bottom,
        rgba(246, 241, 231, 0.9),
        rgba(233, 223, 210, 0.8),
        rgba(214, 198, 181, 0.9)
      );
      mix-blend-mode: multiply;
    }

    .hero-vignette {
      position: absolute;
      inset: 0;
      /* opacity animated by JS via --vignette-opacity */
      opacity: var(--vignette-opacity, 0.25);
      background: radial-gradient(
        120% 60% at 50% 20%,
        transparent,
        rgba(92, 74, 64, 0.2)
      );
      pointer-events: none;
      transition: opacity 200ms ease;
    }

    /* Foreground */
    .hero-foreground {
      position: relative;
      display: flex;
      align-items: center;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 300ms ease;
      transform: rotateX(var(--rx, 0)) rotateY(var(--ry, 0));
    }

    .hero-container {
      max-width: 1120px;
      padding: 0 24px;
      margin: 0 auto;
    }

    .hero-title {
      margin: 0;
      font-weight: 650;
      letter-spacing: -0.01em;
      line-height: 1.1;
      font-size: clamp(2rem, 4vw + 1rem, 3.5rem);
    }

    /* Gradient spans */
    .grad-a {
      background: linear-gradient(
        90deg,
        var(--beige-200),
        var(--gold-400),
        var(--rose-400)
      );
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .grad-b {
      background: linear-gradient(
        90deg,
        var(--rose-400),
        var(--gold-400),
        var(--sage-500)
      );
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .br-md {
      display: none;
    }
    @media (min-width: 768px) {
      .br-md {
        display: inline;
      }
    }

    .hero-sub {
      max-width: 680px;
      margin-top: 20px;
      color: var(--text-600);
      font-size: clamp(1rem, 0.6vw + 0.85rem, 1.25rem);
      /* y parallax via translateY set in JS */
      transform: translateY(var(--y-sub, 0));
      will-change: transform;
    }

    .hero-ctas {
      display: flex;
      gap: 12px;
      margin-top: 28px;
      transform: translateY(var(--y-cta, 0));
      will-change: transform;
    }

    .btn {
      display: inline-block;
      padding: 12px 20px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 0.95rem;
      text-decoration: none;
      backdrop-filter: saturate(120%) blur(2px);
      transition: background-color 0.25s ease, color 0.25s ease,
        border-color 0.25s ease;
    }

    .btn-primary {
      background: var(--beige-200);
      color: var(--text-700);
      box-shadow: 0 8px 18px rgba(226, 201, 184, 0.4);
    }
    .btn-primary:hover {
      background: var(--gold-400);
      color: var(--white-soft);
    }

    .btn-outline {
      border: 1px solid color-mix(in oklab, var(--gold-400), transparent 50%);
      color: var(--text-700);
      background: color-mix(in oklab, var(--beige-100), transparent 80%);
    }
    .btn-outline:hover {
      border-color: var(--rose-400);
      background: color-mix(in oklab, var(--rose-400), transparent 90%);
    }

    /* Ambient lights */
    .glow {
      position: absolute;
      border-radius: 999px;
      filter: blur(40px);
      pointer-events: none;
    }
    .glow-a {
      left: 10%;
      top: 18%;
      width: 8rem;
      height: 8rem;
      background: color-mix(in oklab, var(--gold-400), transparent 75%);
    }
    .glow-b {
      right: 12%;
      bottom: 12%;
      width: 5rem;
      height: 5rem;
      background: color-mix(in oklab, var(--sage-500), transparent 80%);
    }

    /* Title parallax (y) from JS */
    .hero-title {
      transform: translateY(var(--y-title, 0));
      will-change: transform;
    }

    /* Small safety for users who prefer reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .hero-foreground,
      .hero-title,
      .hero-sub,
      .hero-ctas {
        transition: none !important;
        transform: none !important;
      }
      .cue-line {
        animation: none;
      }
    }
  </style>
  <body>
    <!-- SOMA Interactive Hero -->
    <section id="soma-hero" aria-label="Soma Wellness interactive hero">
      <div class="hero-bg">
        <video
          id="hero-video"
          class="hero-video"
          autoplay
          muted
          loop
          playsinline
          poster="media/soma-hero-poster.jpg"
          aria-hidden="true"
        >
          <source src="media/soma-hero.mp4" type="video/mp4" />
        </video>
        <div class="hero-wash"></div>
        <div class="hero-vignette"></div>
      </div>

      <div class="hero-foreground">
        <div class="hero-container">
          <h1 class="hero-title">
            <span class="grad-a">Holistic Wellness &</span><br class="br-md" />
            <span class="grad-b">Sacred Healing</span>
          </h1>

          <p class="hero-sub">
            A sanctuary of touch, sound, breath, presence, and tea. Rooted in
            Himalayan wisdom, designed for modern nervous systems.
          </p>

          <div class="hero-ctas">
            <a href="#book" class="btn btn-primary">Book a Session</a>
            <a href="home.html" class="btn btn-outline">Home</a>
          </div>
        </div>

        <!-- Ambient lights -->
        <div class="glow glow-a" aria-hidden="true"></div>
        <div class="glow glow-b" aria-hidden="true"></div>
      </div>
    </section>

    <script>
      // ====== SOMA Vanilla Parallax & Mouse Tilt ======
      (function () {
        const hero = document.getElementById("soma-hero");
        const fg = hero.querySelector(".hero-foreground");
        const title = hero.querySelector(".hero-title");
        const sub = hero.querySelector(".hero-sub");
        const ctas = hero.querySelector(".hero-ctas");
        const vignette = hero.querySelector(".hero-vignette");

        // Mouse tilt (sets CSS vars --rx/--ry and slight translate --tx/--ty on foreground)
        hero.addEventListener(
          "mousemove",
          (e) => {
            const r = hero.getBoundingClientRect();
            const x = (e.clientX - (r.left + r.width / 2)) / r.width;
            const y = (e.clientY - (r.top + r.height / 2)) / r.height;
            fg.style.setProperty("--rx", y * -6 + "deg");
            fg.style.setProperty("--ry", x * 6 + "deg");
            fg.style.setProperty("--tx", x * 10 + "px");
            fg.style.setProperty("--ty", y * 10 + "px");
          },
          { passive: true }
        );

        // Scroll parallax (title/sub/cta + vignette opacity)
        const lerp = (a, b, t) => a + (b - a) * t;
        const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

        function updateOnScroll() {
          const rect = hero.getBoundingClientRect();
          const start = 0; // when hero top reaches viewport top
          const end = rect.height; // when hero bottom reaches viewport top
          const progress = clamp((0 - rect.top - start) / (end - start), 0, 1);

          // Map progress to translateY values
          const yTitle = lerp(0, -8, progress); // in vh
          const ySub = lerp(0, -5, progress);
          const yCta = lerp(0, -3, progress);
          title.style.setProperty("--y-title", yTitle + "vh");
          sub.style.setProperty("--y-sub", ySub + "vh");
          ctas.style.setProperty("--y-cta", yCta + "vh");

          // Vignette opacity 0.2 â†’ 0.45
          const vig = lerp(0.2, 0.45, progress);
          vignette.style.setProperty("--vignette-opacity", vig.toFixed(3));
        }

        // Use rAF for smoother updates
        let ticking = false;
        function onScroll() {
          if (!ticking) {
            window.requestAnimationFrame(() => {
              updateOnScroll();
              ticking = false;
            });
            ticking = true;
          }
        }
        window.addEventListener("scroll", onScroll, { passive: true });
        window.addEventListener("resize", onScroll);

        // Initial
        updateOnScroll();

        // Minimal runtime sanity tests (won't throw in prod)
        try {
          console.assert(!!hero, "Hero section exists");
          console.assert(
            !!title && !!sub && !!ctas,
            "Key hero elements present"
          );
        } catch (e) {
          /* noop */
        }
      })();
    </script>
  </body>
</html>
